{"ast":null,"code":"var _jsxFileName = \"D:\\\\Codes\\\\Final_project_demo\\\\br_frontend\\\\src\\\\pages\\\\Admin\\\\Invoice\\\\InvoiceListPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { getAuthHeaders, getUserRoleFromToken } from '../../../services/userAuth';\nimport { Navigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:5231';\nconst Invoices = () => {\n  _s();\n  const [invoices, setInvoices] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const userRole = getUserRoleFromToken();\n    if (userRole !== '1') {\n      alert(\"You do not have permission to view this page.\");\n      navigate('/');\n      return;\n    } else {\n      fetchInvoices();\n    }\n  }, []);\n  const fetchInvoices = async () => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/invoice`, {\n        headers: getAuthHeaders()\n      });\n      if (!response.ok) {\n        throw new Error(`Error fetching invoices: ${response.status}`);\n      }\n      const data = await response.json();\n      setInvoices(data);\n      setLoading(false);\n    } catch (err) {\n      setError(err.message);\n      setLoading(false);\n    }\n  };\n  const handleDelete = async id => {\n    if (window.confirm(\"Are you sure you want to delete this invoice? This action cannot be undone.\")) {\n      try {\n        await fetch(`http://localhost:5231/api/invoice/${id}`, {\n          method: 'DELETE'\n        });\n        fetchInvoices();\n      } catch (error) {\n        console.error(\"Error deleting book:\", error);\n      }\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '1rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Invoices\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), invoices.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No invoices available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          width: '100%',\n          borderCollapse: 'collapse'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: '1px solid #ccc',\n                padding: '0.5rem'\n              },\n              children: \"Invoice ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: '1px solid #ccc',\n                padding: '0.5rem'\n              },\n              children: \"Invoice Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: '1px solid #ccc',\n                padding: '0.5rem'\n              },\n              children: \"Total Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                border: '1px solid #ccc',\n                padding: '0.5rem'\n              },\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: invoices.map(invoice => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                border: '1px solid #ccc',\n                padding: '0.5rem'\n              },\n              children: invoice.invoiceId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                border: '1px solid #ccc',\n                padding: '0.5rem'\n              },\n              children: new Date(invoice.invoiceDate).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                border: '1px solid #ccc',\n                padding: '0.5rem'\n              },\n              children: [invoice.totalAmount.toLocaleString(), \"\\u0111\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                border: '1px solid #ccc',\n                padding: '0.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: `/admin/invoice-form/${invoice.invoiceId}`,\n                children: \"Detail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelete(invoice.invoiceId),\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this)]\n          }, invoice.invoiceId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Invoices, \"odYmmUt4KI0Hipmut/4eF1rf+mU=\");\n_c = Invoices;\nexport default InvoiceListPage;\nvar _c;\n$RefreshReg$(_c, \"Invoices\");","map":{"version":3,"names":["React","useEffect","useState","getAuthHeaders","getUserRoleFromToken","Navigate","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","Invoices","_s","invoices","setInvoices","loading","setLoading","error","setError","userRole","alert","navigate","fetchInvoices","response","fetch","headers","ok","Error","status","data","json","err","message","handleDelete","id","window","confirm","method","console","children","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","length","width","borderCollapse","border","map","invoice","invoiceId","Date","invoiceDate","toLocaleDateString","totalAmount","toLocaleString","Link","to","onClick","_c","InvoiceListPage","$RefreshReg$"],"sources":["D:/Codes/Final_project_demo/br_frontend/src/pages/Admin/Invoice/InvoiceListPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getAuthHeaders, getUserRoleFromToken } from '../../../services/userAuth';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nconst API_BASE_URL = 'http://localhost:5231';\r\n\r\nconst Invoices = () => {\r\n  const [invoices, setInvoices] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const userRole = getUserRoleFromToken();\r\n    if (userRole !== '1') {\r\n      alert(\"You do not have permission to view this page.\");\r\n        navigate('/');\r\n      return;\r\n    }\r\n    else{\r\n      fetchInvoices();\r\n    }\r\n  }, []);\r\n\r\n  const fetchInvoices = async () => {\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/api/invoice`, {\r\n          headers: getAuthHeaders(),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Error fetching invoices: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        setInvoices(data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setError(err.message);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        if (window.confirm(\"Are you sure you want to delete this invoice? This action cannot be undone.\")) {\r\n            try {\r\n                await fetch(`http://localhost:5231/api/invoice/${id}`, {\r\n                    method: 'DELETE',\r\n                });\r\n                fetchInvoices();\r\n            } catch (error) {\r\n                console.error(\"Error deleting book:\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div>Error: {error}</div>;\r\n\r\n  return (\r\n    <>\r\n      <div style={{ padding: '1rem' }}>\r\n        <h2>Invoices</h2>\r\n        {invoices.length === 0 ? (\r\n          <p>No invoices available.</p>\r\n        ) : (\r\n          <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n            <thead>\r\n              <tr>\r\n                <th style={{ border: '1px solid #ccc', padding: '0.5rem' }}>Invoice ID</th>\r\n                <th style={{ border: '1px solid #ccc', padding: '0.5rem' }}>Invoice Date</th>\r\n                <th style={{ border: '1px solid #ccc', padding: '0.5rem' }}>Total Amount</th>\r\n                <th style={{ border: '1px solid #ccc', padding: '0.5rem' }}>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {invoices.map(invoice => (\r\n                <tr key={invoice.invoiceId}>\r\n                  <td style={{ border: '1px solid #ccc', padding: '0.5rem' }}>{invoice.invoiceId}</td>\r\n                  <td style={{ border: '1px solid #ccc', padding: '0.5rem' }}>{new Date(invoice.invoiceDate).toLocaleDateString()}</td>\r\n                  <td style={{ border: '1px solid #ccc', padding: '0.5rem' }}>{invoice.totalAmount.toLocaleString()}Ä‘</td>\r\n                  <td style={{ border: '1px solid #ccc', padding: '0.5rem' }}>\r\n                    <Link to={`/admin/invoice-form/${invoice.invoiceId}`}>Detail</Link>\r\n                    <button onClick={() => handleDelete(invoice.invoiceId)}>Delete</button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default InvoiceListPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}